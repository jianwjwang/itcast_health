<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.itheima.dao.SetmealDao" >
  <resultMap id="BaseResultMap" type="com.itheima.pojo.Setmeal" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="code" property="code" jdbcType="VARCHAR" />
    <result column="helpCode" property="helpCode" jdbcType="VARCHAR" />
    <result column="sex" property="sex" jdbcType="CHAR" />
    <result column="age" property="age" jdbcType="VARCHAR" />
    <result column="price" property="price" jdbcType="REAL" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="attention" property="attention" jdbcType="VARCHAR" />
    <result column="img" property="img" jdbcType="VARCHAR" />
  </resultMap>

  <insert id="add" parameterType="com.itheima.pojo.Setmeal" >
    <selectKey resultType="java.lang.Integer" order="AFTER" keyProperty="id">
      select LAST_INSERT_ID()
    </selectKey>
    insert into t_setmeal (name, code,
      helpCode, sex, age, price, 
      remark, attention, img
      )
    values (#{name,jdbcType=VARCHAR}, #{code,jdbcType=VARCHAR},
      #{helpCode,jdbcType=VARCHAR}, #{sex,jdbcType=CHAR}, #{age,jdbcType=VARCHAR}, #{price,jdbcType=REAL},
      #{remark,jdbcType=VARCHAR}, #{attention,jdbcType=VARCHAR}, #{img,jdbcType=VARCHAR}
      )
  </insert>

  <insert id="setSetmealAndCheckGroup" parameterType="map">
    insert into t_setmeal_checkgroup(setmeal_id,checkgroup_id) values(#{setmealId},#{checkgroupId})
  </insert>

  <select id="queryByCondition" parameterType="String" resultType="com.itheima.pojo.Setmeal">
    select * from t_setmeal
    <if test="value !=null and value.length > 0 and value != '' ">
      where code = #{value} or name = #{value} or helpCode= #{value}
    </if>
  </select>

</mapper>